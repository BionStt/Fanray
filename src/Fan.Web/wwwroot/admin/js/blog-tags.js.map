{"version":3,"sources":["../../../Areas/Admin/js/blog-tags.js"],"names":["Vue","component","mixins","tagsMixin","data","dialogVisible","title","description","upsertText","tagEditing","errMsg","computed","disableUpsertButton","trim","length","addButtonVisible","payload","methods","closeDialog","addTag","editTag","tag","deleteTag","confirm","axios","delete","id","$root","headers","then","idx","tags","findIndex","c","splice","toast","catch","toastError","viewPosts","url","window","location","href","insertTag","post","resp","push","sortTags","err","response","errorMessage","updateTag","count","sort","a","b","titleA","toUpperCase","titleB"],"mappings":"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","file":"blog-tags.js","sourcesContent":["ï»¿Vue.component('blog-tags', {\r\n    mixins: [tagsMixin],\r\n    data: () => ({\r\n        dialogVisible: false,\r\n        title: '',\r\n        description: '',\r\n        upsertText: 'Add',\r\n        tagEditing: null,\r\n        errMsg: '',\r\n    }),\r\n    computed: {\r\n        disableUpsertButton() {\r\n            return this.title.trim().length <= 0;\r\n        },\r\n        addButtonVisible() {\r\n            return this.upsertText === 'Add';\r\n        },\r\n        payload() {\r\n            return {\r\n                title: this.title,\r\n                description: this.description,\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        closeDialog() {\r\n            this.dialogVisible = false;\r\n            this.title = '';\r\n            this.description = '';\r\n            this.errMsg = '';\r\n        },\r\n        // when user clicks on the plus fab to add a new tag\r\n        addTag() {\r\n            this.dialogVisible = true;\r\n            this.title = '';\r\n            this.description = '';\r\n            this.upsertText = 'Add';\r\n        },\r\n        // when user clicks on the Edit from the dropdown\r\n        editTag(tag) {\r\n            this.dialogVisible = true;\r\n            this.tagEditing = tag;\r\n            this.upsertText = 'Edit';\r\n            this.title = tag.title;\r\n            this.description = tag.description;\r\n        },\r\n        // when user clicks on the Delete from the dropdown\r\n        deleteTag(tag) {\r\n            console.log('tag being deleted: ', tag);\r\n            if (confirm(`Are you sure you want to permanently delete '${tag.title}'?`)) {\r\n                axios.delete(`/admin/tags?id=${tag.id}`, this.$root.headers)\r\n                    .then(resp => {\r\n                        let idx = this.tags.findIndex(c => c.id === tag.id);\r\n                        this.tags.splice(idx, 1);\r\n                        this.$root.toast('Tag deleted.');\r\n                    })\r\n                    .catch(err => {\r\n                        this.$root.toastError('Delete tag failed.');\r\n                        console.error(err);\r\n                    });\r\n            }\r\n        },\r\n        // when user clicks on the View Posts from the dropdown\r\n        viewPosts(url) {\r\n            window.location.href = url; // relative \r\n        },\r\n        // when user clicks on the Add button on the dialog\r\n        insertTag() {\r\n            axios.post('/admin/tags', this.payload, this.$root.headers)\r\n                .then(resp => {\r\n                    this.closeDialog();\r\n                    this.tags.push(resp.data);\r\n                    this.sortTags();\r\n                    this.$root.toast('New tag added.');\r\n                })\r\n                .catch(err => {\r\n                    this.errMsg = err.response.data[0].errorMessage;\r\n                    this.$root.toast('Add tag failed.', 'red');\r\n                });\r\n        },\r\n        // when user clicks on the Update button on the dialog\r\n        updateTag() {\r\n            this.payload.id = this.tagEditing.id;\r\n            this.payload.count = this.tagEditing.count;\r\n            axios.post('/admin/tags?handler=update', this.payload, this.$root.headers)\r\n                .then(resp => {\r\n                    this.closeDialog();\r\n                    // replace\r\n                    let idx = this.tags.findIndex(c => c.id === resp.data.id);\r\n                    this.tags[idx] = resp.data;\r\n                    // sort\r\n                    this.sortTags();\r\n                    this.$root.toast('Tag updated.');\r\n                })\r\n                .catch(err => {\r\n                    this.errMsg = err.response.data[0].errorMessage;\r\n                    this.$root.toast('Update tag failed.', 'red');\r\n                });\r\n        },\r\n        sortTags() {\r\n            this.tags.sort((a, b) => {\r\n                var titleA = a.title.toUpperCase();\r\n                var titleB = b.title.toUpperCase();\r\n                if (titleA < titleB) {\r\n                    return -1;\r\n                }\r\n                if (titleA > titleB) {\r\n                    return 1;\r\n                }\r\n\r\n                return 0; // equal\r\n            });\r\n        }\r\n    }\r\n});"]}